# Redirect to https
RewriteEngine on
RewriteCond %{SERVER_PORT} !^443$
RewriteRule (.*) https://%{SERVER_NAME}/$1 [R=301,L]

# Disable directory listing and multi views
Options -Indexes -MultiViews

# Branding redirects
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/aws-dynamodb/(.*)$ /8.0/docs/components/connectors/out-of-the-box-connectors/amazon-dynamodb/$1 [R=301,L]
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/aws-eventbridge/(.*)$ /8.0/docs/components/connectors/out-of-the-box-connectors/amazon-eventbridge/$1 [R=301,L]
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/aws-eventbridge-webhook/(.*)$ /8.0/docs/components/connectors/out-of-the-box-connectors/amazon-eventbridge-webhook/$1 [R=301,L]
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/aws-sns/(.*)$ /8.0/docs/components/connectors/out-of-the-box-connectors/amazon-sns/$1 [R=301,L]
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/aws-sns-inbound/(.*)$ /8.0/docs/components/connectors/out-of-the-box-connectors/amazon-sns-inbound/$1 [R=301,L]
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/aws-sqs/(.*)$ /8.0/docs/components/connectors/out-of-the-box-connectors/amazon-sqs/$1 [R=301,L]
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/aws-sqs-inbound/(.*)$ /8.0/docs/components/connectors/out-of-the-box-connectors/amazon-sqs-inbound/$1 [R=301,L]

# rename Desktop Modeler reference to Camunda Cloud
RewriteRule ^docs/components/modeler/desktop-modeler/connect-to-camunda-cloud/(.*)$ /8.0/docs/components/modeler/desktop-modeler/connect-to-camunda-platform-8/$1 [R=301,L]

# API Endpoints to API Orchestration
RewriteRule ^docs/guides/orchestrate-api-endpoints(.*)$ /8.0/docs/guides/orchestrate-apis$1 [R=301,L]

# connectors restructure 8.0-8.2
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/rest/(.*)$ /8.0/docs/components/connectors/protocol/rest/$1 [R=301,L]
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/graphql/(.*)$ /8.0/docs/components/connectors/protocol/graphql/$1 [R=301,L]
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/http-webhook/(.*)$ /8.0/docs/components/connectors/protocol/http-webhook/$1 [R=301,L]
RewriteRule ^docs/components/modeler/web-modeler/advanced-modeling/manage-connector-templates/(.*)$ /8.0/docs/components/connectors/manage-connector-templates/$1 [R=301,L]

# apis/clients to apis/tools change
RewriteRule ^docs/apis-clients(.*)$ /8.0/docs/apis-tools$1 [R=301,L]
RewriteRule ^optimize/apis-clients(.*)$ /3.8.0/optimize/apis-tools$1 [R=301,L]

# Consolidated redundant element-template pages - v8.0, current, and vNext.
RewriteRule ^docs/components/modeler/desktop-modeler/element-templates/?$ /8.0/docs/components/modeler/desktop-modeler/element-templates/about-templates/ [R=301,L]

# Redirects for Connectors move to top level
RewriteRule ^docs/components/integration-framework/introduction-to-connectors/(.*)$ /8.0/docs/components/connectors/introduction-to-connectors/$1 [R=301,L]
RewriteRule ^docs/components/integration-framework/introduction-to-connectors$ /8.0/docs/components/connectors/introduction-to-connectors [R=301,L]
RewriteRule ^docs/components/integration-framework/(.*)$ /8.0/docs/components/$1 [R=301,L]
RewriteRule ^docs/components/integration-framework$ /8.0/docs/components/ [R=301,L]
RewriteRule ^docs/next/components/integration-framework/(.*)$ /8.0/docs/components/$1 [R=301,L]
RewriteRule ^docs/next/components/integration-framework$ /8.0/docs/components/ [R=301,L]

# These pages existed 8.0 by error and were removed
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/github-webhook$ /8.0/docs/components/connectors/out-of-the-box-connectors/available-connectors-overview [R=301,L]
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/github-webhook/(.*)$ /8.0/docs/components/connectors/out-of-the-box-connectors/available-connectors-overview/$1 [R=301,L]
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/http-webhook$ /8.0/docs/components/connectors/out-of-the-box-connectors/available-connectors-overview [R=301,L]
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/http-webhook/(.*)$ /8.0/docs/components/connectors/out-of-the-box-connectors/available-connectors-overview/$1 [R=301,L]
RewriteRule ^docs/guides/implementing-connectors/(.*)$ /8.0/docs/guides/configuring-out-of-the-box-connectors/$1 [R=301,L]
RewriteRule ^docs/guides/implementing-connectors$ /8.0/docs/guides/configuring-out-of-the-box-connectors/ [R=301,L]


# Add yaml mime type
AddType text/vnd.yaml   yaml
# Add bpmn mime type
AddType text/xml        bpmn
# Add graphql scheme mime type
AddType text/plain      graphqls
# Add diff mime type
AddType text/plain      diff
