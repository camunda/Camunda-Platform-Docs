# Redirect to https
RewriteEngine on
RewriteCond %{SERVER_PORT} !^443$
RewriteRule (.*) https://%{SERVER_NAME}/$1 [R=301,L]

# Disable directory listing and multi views
Options -Indexes -MultiViews

# Remove "new web modeler" page, re-route to launch-web-modeler rather than launch-cloud-modeler
RewriteRule ^docs/components/modeler/web-modeler/launch-cloud-modeler/?$ /8.1/docs/components/modeler/web-modeler/launch-web-modeler/$1 [R=301,L]

# Remove updating-operate pages
RewriteRule ^docs/components/operate/userguide/updating-operate/?$ /8.1/docs/self-managed/operational-guides/update-guide/introduction/$1 [R=301,L]

RewriteRule ^docs/self-managed/operate-deployment/updating-operate/?$ /8.1/docs/guides/update-guide/introduction/$1 [R=301,L]

# Move install-zeebe-exporters
RewriteRule ^docs/self-managed/platform-deployment/helm-kubernetes/guides/install-zeebe-exporters/?$ /8.1/docs/self-managed/zeebe-deployment/exporters/install-zeebe-exporters/$1 [R=301,L]

# Rename Console API
RewriteRule ^docs/apis-tools/console-api-reference/?$ /8.1/docs/apis-tools/administration-api-reference/$1 [R=301,L]

# Remove Operate feedback page
RewriteRule ^docs/components/operate/userguide/operate-feedback-and-questions/?$ /8.1/contact/$1 [R=301,L]

# Redirect to Connectors overview upon deprecation of Power Automate Connector
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/power-automate/?$ /8.1/docs/components/connectors/out-of-the-box-connectors/available-connectors-overview/ [R=301,L]

# Early access to alpha features
RewriteRule ^docs/reference/early-access/?$ /8.1/docs/reference/alpha-features/ [R=301,L]

# Condense Connectors
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/amazon-sns-inbound/(.*)$ /8.1/docs/components/connectors/out-of-the-box-connectors/amazon-sns/$1 [R=301,L]
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/amazon-sqs-inbound/(.*)$ /8.1/docs/components/connectors/out-of-the-box-connectors/amazon-sqs/$1 [R=301,L]
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/amazon-eventbridge-webhook/(.*)$ /8.1/docs/components/connectors/out-of-the-box-connectors/amazon-eventbridge/$1 [R=301,L]
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/github-webhook/(.*)$ /8.1/docs/components/connectors/out-of-the-box-connectors/github/$1 [R=301,L]
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/kafka-inbound/(.*)$ /8.1/docs/components/connectors/out-of-the-box-connectors/kafka/$1 [R=301,L]
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/rabbitmq-inbound/(.*)$ /8.1/docs/components/connectors/out-of-the-box-connectors/rabbitmq/$1 [R=301,L]
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/slack-inbound/(.*)$ /8.1/docs/components/connectors/out-of-the-box-connectors/slack/$1 [R=301,L]
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/twilio-webhook/(.*)$ /8.1/docs/components/connectors/out-of-the-box-connectors/twilio/$1 [R=301,L]

# Branding redirects
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/aws-dynamodb/(.*)$ /8.1/docs/components/connectors/out-of-the-box-connectors/amazon-dynamodb/$1 [R=301,L]
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/aws-eventbridge/(.*)$ /8.1/docs/components/connectors/out-of-the-box-connectors/amazon-eventbridge/$1 [R=301,L]
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/aws-eventbridge-webhook/(.*)$ /8.1/docs/components/connectors/out-of-the-box-connectors/amazon-eventbridge-webhook/$1 [R=301,L]
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/aws-sns/(.*)$ /8.1/docs/components/connectors/out-of-the-box-connectors/amazon-sns/$1 [R=301,L]
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/aws-sns-inbound/(.*)$ /8.1/docs/components/connectors/out-of-the-box-connectors/amazon-sns-inbound/$1 [R=301,L]
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/aws-sqs/(.*)$ /8.1/docs/components/connectors/out-of-the-box-connectors/amazon-sqs/$1 [R=301,L]
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/aws-sqs-inbound/(.*)$ /8.1/docs/components/connectors/out-of-the-box-connectors/amazon-sqs-inbound/$1 [R=301,L]

# Rename Modeler Camunda 8
RewriteRule ^docs/components/modeler/desktop-modeler/connect-to-camunda-platform-8/(.*)$ /8.1/docs/components/modeler/desktop-modeler/connect-to-camunda-8/$1 [R=301,L]

# Rename Concepts Camunda 8
RewriteRule ^docs/components/concepts/what-is-camunda-platform-8/(.*)$ /8.1/docs/components/concepts/what-is-camunda-8/$1 [R=301,L]

# Renaming Guides
RewriteRule ^docs/guides/migrating-from-camunda-platform-7(.*)$ /8.1/docs/guides/migrating-from-camunda-7$1 [R=301,L]

# rename Desktop Modeler reference to Camunda Cloud
RewriteRule ^docs/components/modeler/desktop-modeler/connect-to-camunda-cloud/(.*)$ /8.1/docs/components/modeler/desktop-modeler/connect-to-camunda-platform-8/$1 [R=301,L]

# API Endpoints to API Orchestration
RewriteRule ^docs/guides/orchestrate-api-endpoints(.*)$ /8.1/docs/guides/orchestrate-apis$1 [R=301,L]

# connectors restructure 8.1-8.2
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/rest/(.*)$ /8.1/docs/components/connectors/protocol/rest/$1 [R=301,L]
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/graphql/(.*)$ /8.1/docs/components/connectors/protocol/graphql/$1 [R=301,L]
RewriteRule ^docs/components/connectors/out-of-the-box-connectors/http-webhook/(.*)$ /8.1/docs/components/connectors/protocol/http-webhook/$1 [R=301,L]
RewriteRule ^docs/components/modeler/web-modeler/advanced-modeling/manage-connector-templates/(.*)$ /8.1/docs/components/connectors/manage-connector-templates/$1 [R=301,L]

RewriteRule ^docs/components/zeebe/open-source/exporters/(.*)$ /8.1/docs/self-managed/concepts/exporters/$1 [R=301,L]
RewriteRule ^docs/components/zeebe/open-source/exporters/$ /8.1/docs/self-managed/concepts/exporters [R=301,L]

# Add yaml mime type
AddType text/vnd.yaml   yaml
# Add bpmn mime type
AddType text/xml        bpmn
# Add graphql scheme mime type
AddType text/plain      graphqls
# Add diff mime type
AddType text/plain      diff
